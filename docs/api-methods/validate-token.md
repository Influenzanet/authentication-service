# Validate token

  Validate and decode a token generated by the service earlier. Used typically for authenticating incoming requests.

* **URL**

  /v1/token/validate

* **Method:**

  `GET`

* **Header Params**

  **Required:**  
  `Authorization: Bearer <token string>`

* **URL Params:**

  * None

* **Success Response:**

  * **Code:** 200  
    **Content:** `{ "user_id": <database id: uint>, "role": <"participant" | "researcher" | "admin">, ... <token infos>  }`

* **Error Response:**

  * **Code:** 400 Bad request  
    **Content:** `{ "error" : "no Authorization token found" }`  
    **Typical reason:** Token is not sent with the request, neither in the header nor as an url param.

  * **Code:** 401 Unauthorized  
    **Content:** `{ "error" : "token not valid" }`  
    **Typical reason:** Token expired or wrong (e.g. signed with the wrong key).

  * **Code:** 500 Internal server error  
    **Content:** `{ "error" : "<error message>" }`  
    **Typical reason:** Something went wrong during the token decrypting process, e.g., because verification key is not available.


* **Sample Call:**

  ```go
    token = "<your-received-token>"
    client := &http.Client{}
    req, _ := http.NewRequest("GET", auth-service-addr + "/v1/token/validate", nil)
    req.Header.Add("Authorization", "Bearer "+ token)
    resp, err := client.Do(req)
    defer resp.Body.Close()
  ```

* **Notes:**

  As long as the old verification key is present, the method accepts tokens signed with that key as well.
